<div class="card mb-3">
  <%= form_for(@road_trip) do |f| %>
  <div class="card mb-3" style="height: 100%; width:46%; float:left; margin:1px">
      <% if @road_trip.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@road_trip.errors.count, "error") %> prohibited this post from being saved:</h2>

          <ul>
          <% @road_trip.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
          </ul>
        </div>
      <% end %>

      <div class="field">
        <%= f.label :title %><br>
        <%= f.text_field :title %>
      </div><br>

      <div class="field">
        <%= f.label :description %><br>
        <%= f.text_area :description, size: "75x5" %>
      </div><br>

      <% if !@road_trip.destinations.empty? %>
      <%= f.label :destinations %>
        <ul class="list-group">
          <% @road_trip.destinations.each do |destination| %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <%= destination.name %>
              <span class="badge badge-primary badge-pill">Stop <%= destination.stop_order(@road_trip) %></span>
            </li>
          <% end %>
        </ul>
      <% end %>

      <ul class="list-group">
        <%= f.fields_for :destination_road_trips, @road_trip.destination_road_trips.build do |destination_road_trips_fields| %>
          <li class="list-group-item d-flex justify-content-between align-items-center">
          <%= destination_road_trips_fields.label :destination_order %>
          <%= destination_road_trips_fields.number_field :destination_order %><br>
          </li>
        <% end %>
      </ul>

      <div class="field">
        <%= f.label :total_miles %><br>
        <%= f.number_field :total_miles %>
      </div>

      <div class="card-body">
        <h3 class="card-header">Create A New Destination</h3><br>
        <%= f.fields_for :destinations, @road_trip.destinations.build do |destinations_fields| %>
          <%= destinations_fields.label :name %>
          <%= destinations_fields.text_field :name %><br>
          <%= destinations_fields.label :description %>
          <%= destinations_fields.text_area :description, size: "75x5" %>
          <%= destinations_fields.label :city %>
          <%= destinations_fields.text_field :city %>
          <%= destinations_fields.label :state %>
          <%= destinations_fields.text_field :state %><br>
          <%= destinations_fields.label :street_address %>
          <%= destinations_fields.text_field :street_address %>
        <% end %>
      </div>
      <br>
  </div>

  <div class="card mb-3" style="height: 100%; width:52%; float:right; margin:1px">
    <h3 class="card-header">Destinations</h3>
    <div class="card-body">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">City, State</th>
            <th scope="col">Add Destination</th>
            <th scope="col">Stop #</th>
            <th colspan="3"></th>
          </tr>
        </thead>
        <tbody>
          <% @destinations.each.with_index(1) do |destination, i| %>
            <tr class="table-active">
              <td><%= destination.name %></td>
              <td><%= destination.city_state %></td>
              <td><center><input type="checkbox" value="<%=i%>" name="road_trip[destination_ids][]" id="road_trip_destination_ids_<%=i%>"></input></center></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="actions">
    <%= f.submit "Create Road Trip", class: "btn btn-primary btn-lg btn-block"%>
    <% end %>
  </div>
</div>
